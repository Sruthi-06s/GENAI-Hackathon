<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåæ ‡∞∞‡±à‡∞§‡±Å ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡±Å - AI Voice Farmer Assistant</title>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(145deg, #1a472a 0%, #2e7d32 50%, #4caf50 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Background Elements */
        .floating-leaf {
            position: absolute;
            color: rgba(255, 255, 255, 0.1);
            font-size: 2rem;
            animation: float 8s infinite ease-in-out;
            pointer-events: none;
        }

        .leaf-1 {
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }

        .leaf-2 {
            bottom: 15%;
            right: 8%;
            animation-delay: 2s;
            font-size: 3rem;
        }

        .leaf-3 {
            top: 30%;
            right: 15%;
            animation-delay: 4s;
            transform: rotate(45deg);
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(10deg);
            }
        }

        .main-container {
            width: 100%;
            max-width: 900px;
            position: relative;
            z-index: 10;
        }

        /* Header Section */
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 3.2rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .header h1 i {
            font-size: 3rem;
            color: #ffd700;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 300;
            letter-spacing: 1px;
        }

        /* Main Card */
        .assistant-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 40px;
            padding: 40px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3), 0 0 0 2px rgba(255, 255, 255, 0.1) inset;
            animation: scaleIn 0.6s ease-out;
            transform-origin: center;
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Language Selector */
        .language-section {
            margin-bottom: 30px;
        }

        .language-label {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #1a472a;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .language-label i {
            font-size: 1.3rem;
            color: #2e7d32;
        }

        .language-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lang-option {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-weight: 500;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .lang-option:hover {
            border-color: #2e7d32;
            background: #f1f8e9;
            transform: translateY(-2px);
        }

        .lang-option.active {
            background: #2e7d32;
            border-color: #2e7d32;
            color: white;
            box-shadow: 0 10px 20px rgba(46, 125, 50, 0.3);
        }

        /* Voice Button Section */
        .voice-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .voice-btn-container {
            position: relative;
            display: inline-block;
        }

        .voice-btn {
            width: 140px;
            height: 140px;
            background: linear-gradient(145deg, #2e7d32, #1a472a);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 3.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 0 4px rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .voice-btn:hover {
            transform: scale(1.05);
            background: linear-gradient(145deg, #1a472a, #2e7d32);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
        }

        .voice-btn:active {
            transform: scale(0.95);
        }

        .voice-btn.listening {
            animation: pulse 1.5s infinite;
            background: linear-gradient(145deg, #c62828, #b71c1c);
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(198, 40, 40, 0.7);
            }
            70% {
                box-shadow: 0 0 0 30px rgba(198, 40, 40, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(198, 40, 40, 0);
            }
        }

        .voice-hint {
            margin-top: 15px;
            color: #1a472a;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .voice-hint i {
            color: #2e7d32;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        /* Wave Animation for Listening */
        .wave-animation {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 20px 0;
            height: 50px;
        }

        .wave {
            width: 8px;
            height: 100%;
            background: #2e7d32;
            border-radius: 10px;
            animation: wave 1s ease-in-out infinite;
        }

        .wave:nth-child(2) {
            animation-delay: 0.1s;
        }
        .wave:nth-child(3) {
            animation-delay: 0.2s;
        }
        .wave:nth-child(4) {
            animation-delay: 0.3s;
        }
        .wave:nth-child(5) {
            animation-delay: 0.4s;
        }

        @keyframes wave {
            0%, 100% {
                transform: scaleY(0.3);
            }
            50% {
                transform: scaleY(1);
            }
        }

        /* Chat Container */
        .chat-container {
            background: #f5f5f5;
            border-radius: 30px;
            padding: 20px;
            margin: 30px 0;
            max-height: 400px;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .chat-container::-webkit-scrollbar {
            width: 8px;
        }

        .chat-container::-webkit-scrollbar-track {
            background: #e0e0e0;
            border-radius: 10px;
        }

        .chat-container::-webkit-scrollbar-thumb {
            background: #2e7d32;
            border-radius: 10px;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }

        .user-message {
            align-items: flex-end;
        }

        .bot-message {
            align-items: flex-start;
        }

        .message-bubble {
            max-width: 80%;
            padding: 12px 18px;
            border-radius: 20px;
            position: relative;
            animation: messageSlide 0.3s ease;
            font-size: 1rem;
            line-height: 1.5;
            white-space: pre-line;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .user-message .message-bubble {
            background: #2e7d32;
            color: white;
            border-bottom-right-radius: 4px;
        }

        .bot-message .message-bubble {
            background: white;
            color: #333;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .message-time {
            font-size: 0.7rem;
            margin-top: 4px;
            color: #999;
            padding: 0 5px;
        }

        /* Quick Questions */
        .quick-questions {
            margin-top: 25px;
        }

        .quick-questions p {
            color: #1a472a;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quick-questions p i {
            font-size: 1.2rem;
        }

        .question-chips {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .chip {
            padding: 12px 20px;
            background: #e8f5e9;
            border: 2px solid #c8e6c9;
            border-radius: 50px;
            color: #1a472a;
            font-weight: 500;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1 1 auto;
            min-width: 180px;
            border: none;
        }

        .chip:hover {
            background: #2e7d32;
            border-color: #2e7d32;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 125, 50, 0.3);
        }

        .chip i {
            font-size: 1.1rem;
        }

        /* Status Indicator */
        .status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 12px;
            background: #f1f8e9;
            border-radius: 50px;
            color: #1a472a;
            font-weight: 500;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: #4caf50;
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.3;
            }
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 12px 18px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            width: fit-content;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #2e7d32;
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }
        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typingBounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }

        /* Footer */
        .footer {
            margin-top: 30px;
            text-align: center;
            color: white;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .footer i {
            color: #ff6b6b;
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .voice-status {
            font-size: 0.9rem;
            margin-top: 5px;
            color: #666;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .assistant-card {
                padding: 25px;
            }

            .header h1 {
                font-size: 2.5rem;
            }

            .voice-btn {
                width: 120px;
                height: 120px;
                font-size: 3rem;
            }

            .language-selector {
                flex-direction: column;
            }

            .lang-option {
                width: 100%;
            }

            .chip {
                min-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 2rem;
            }

            .question-chips {
                flex-direction: column;
            }

            .chip {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>

    <!-- Floating Leaves Animation -->
    <i class="fas fa-leaf floating-leaf leaf-1"></i>
    <i class="fas fa-seedling floating-leaf leaf-2"></i>
    <i class="fas fa-tree floating-leaf leaf-3"></i>

    <div class="main-container">
        
        <!-- Header -->
        <div class="header">
            <h1>
                <i class="fas fa-microphone-alt"></i>
                <span id="headerTitle">‡∞∞‡±à‡∞§‡±Å ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡±Å</span>
                <i class="fas fa-robot"></i>
            </h1>
            <p id="headerSubtitle">AI Voice Farmer Assistant | ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø</p>
        </div>

        <!-- Main Card -->
        <div class="assistant-card">

            <!-- Language Selection -->
            <div class="language-section">
                <div class="language-label">
                    <i class="fas fa-language"></i>
                    <span id="languageLabel">‡∞Æ‡±Ä ‡∞≠‡∞æ‡∞∑‡∞®‡±Å ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø / Select Language</span>
                </div>
                <div class="language-selector">
                    <button class="lang-option active" onclick="setLanguage('te', this)">
                        <i class="fas fa-flag-india"></i> ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å
                    </button>
                    <button class="lang-option" onclick="setLanguage('en', this)">
                        <i class="fas fa-flag-usa"></i> English
                    </button>
                    <button class="lang-option" onclick="setLanguage('hi', this)">
                        <i class="fas fa-flag-india"></i> ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä
                    </button>
                </div>
                <div class="voice-status" id="voiceStatus"></div>
            </div>

            <!-- Voice Button Section -->
            <div class="voice-section">
                <div class="voice-btn-container">
                    <button class="voice-btn" id="voiceBtn" onclick="toggleListening()">
                        <i class="fas fa-microphone"></i>
                    </button>
                </div>
                <div class="voice-hint">
                    <i class="fas fa-mouse-pointer"></i>
                    <span id="voiceHint">‡∞Æ‡±à‡∞ï‡±ç ‡∞™‡±à ‡∞ï‡±ç‡∞≤‡∞ø‡∞ï‡±ç ‡∞ö‡±á‡∞∏‡∞ø ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø</span>
                </div>
            </div>

            <!-- Wave Animation (Visible when listening) -->
            <div class="wave-animation hidden" id="waveAnimation">
                <div class="wave"></div>
                <div class="wave"></div>
                <div class="wave"></div>
                <div class="wave"></div>
                <div class="wave"></div>
            </div>

            <!-- Chat Container -->
            <div class="chat-container" id="chatContainer">
                <div class="message bot-message">
                    <div class="message-bubble" id="welcomeMessage">
                        üåæ ‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç! ‡∞®‡±á‡∞®‡±Å AI ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡∞ø‡∞®‡∞ø. 
                        ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞Ç‡∞¨‡∞Ç‡∞ß‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø:
                        ‚Ä¢ ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡±Å‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞µ‡∞æ‡∞ü‡∞ø ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞£
                        ‚Ä¢ ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å
                        ‚Ä¢ ‡∞™‡∞Ç‡∞ü ‡∞ï‡±ã‡∞§ ‡∞∏‡∞Æ‡∞Ø‡∞Ç
                        ‚Ä¢ ‡∞ö‡±Ä‡∞°‡∞™‡±Ä‡∞°‡∞≤ ‡∞®‡∞ø‡∞µ‡∞æ‡∞∞‡∞£
                        ‚Ä¢ ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£ ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç
                        ‚Ä¢ ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞á‡∞Ç‡∞ï‡∞æ...
                    </div>
                    <div class="message-time">‡∞á‡∞™‡±ç‡∞™‡±Å‡∞°‡±á</div>
                </div>
            </div>

            <!-- Typing Indicator (Hidden by default) -->
            <div class="typing-indicator hidden" id="typingIndicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>

            <!-- Quick Questions - Dynamic based on language -->
            <div class="quick-questions">
                <p><i class="fas fa-lightbulb"></i> <span id="quickQuestionsTitle">‡∞§‡∞∞‡∞ö‡±Å‡∞ó‡∞æ ‡∞Ö‡∞°‡∞ø‡∞ó‡±á ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞≤‡±Å:</span></p>
                <div class="question-chips" id="questionChips">
                    <!-- Chips will be populated dynamically by JavaScript -->
                </div>
            </div>

            <!-- Status Indicator -->
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span id="statusText">AI ‡∞Ö‡∞∏‡∞ø‡∞∏‡±ç‡∞ü‡±Ü‡∞Ç‡∞ü‡±ç ‡∞∏‡∞ø‡∞¶‡±ç‡∞ß‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø</span>
                <i class="fas fa-check-circle" style="color: #4caf50;"></i>
            </div>

            <!-- Audio Control Buttons -->
            <div class="text-center mt-20" style="display: flex; gap: 10px; justify-content: center; margin-top: 15px;">
                <button id="stopAudioBtn" class="chip" onclick="stopAllAudio()" style="background: #f44336; color: white; border: none;">
                    <i class="fas fa-stop"></i> <span id="stopAudioText">‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã ‡∞Ü‡∞™‡∞Ç‡∞°‡∞ø</span>
                </button>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p id="footerText">‡∞∞‡±à‡∞§‡±Å‡∞≤ ‡∞ï‡±ã‡∞∏‡∞Ç <i class="fas fa-heart"></i> | AI ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡±Å - ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø</p>
        </div>
    </div>

    <script>
        let currentLanguage = 'te';
        let isListening = false;
        let recognition = null;
        let currentUtterance = null;
        let voices = [];

        // FAQ Questions in different languages
        const faqQuestions = {
            'te': [
                { icon: 'fa-leaf', text: '‡∞µ‡∞∞‡∞ø‡∞≤‡±ã ‡∞¨‡∞æ‡∞ï‡±ç‡∞ü‡±Ä‡∞∞‡∞ø‡∞Ø‡∞≤‡±ç ‡∞≤‡±Ä‡∞´‡±ç ‡∞¨‡±ç‡∞≤‡±à‡∞ü‡±ç ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞£ ‡∞é‡∞≤‡∞æ?', question: '‡∞µ‡∞∞‡∞ø‡∞≤‡±ã ‡∞¨‡∞æ‡∞ï‡±ç‡∞ü‡±Ä‡∞∞‡∞ø‡∞Ø‡∞≤‡±ç ‡∞≤‡±Ä‡∞´‡±ç ‡∞¨‡±ç‡∞≤‡±à‡∞ü‡±ç ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞£ ‡∞é‡∞≤‡∞æ?' },
                { icon: 'fa-flask', text: '‡∞µ‡∞∞‡∞ø‡∞ï‡∞ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å ‡∞é‡∞≤‡∞æ ‡∞µ‡±á‡∞Ø‡∞æ‡∞≤‡∞ø?', question: '‡∞µ‡∞∞‡∞ø‡∞ï‡∞ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å ‡∞é‡∞≤‡∞æ ‡∞µ‡±á‡∞Ø‡∞æ‡∞≤‡∞ø?' },
                { icon: 'fa-calendar', text: '‡∞µ‡∞∞‡∞ø ‡∞ï‡±ã‡∞§ ‡∞∏‡∞Æ‡∞Ø‡∞Ç ‡∞é‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å?', question: '‡∞µ‡∞∞‡∞ø ‡∞ï‡±ã‡∞§ ‡∞∏‡∞Æ‡∞Ø‡∞Ç ‡∞é‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å?' },
                { icon: 'fa-cloud-sun', text: '‡∞®‡±á‡∞ü‡∞ø ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞é‡∞≤‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø?', question: '‡∞®‡±á‡∞ü‡∞ø ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞é‡∞≤‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø?' },
                { icon: 'fa-bug', text: '‡∞ö‡±Ä‡∞°‡∞™‡±Ä‡∞°‡∞≤ ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞£ ‡∞é‡∞≤‡∞æ?', question: '‡∞ö‡±Ä‡∞°‡∞™‡±Ä‡∞°‡∞≤ ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞£ ‡∞é‡∞≤‡∞æ?' },
                { icon: 'fa-tint', text: '‡∞®‡±Ä‡∞ü‡∞ø ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£ ‡∞é‡∞≤‡∞æ ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞ø?', question: '‡∞®‡±Ä‡∞ü‡∞ø ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£ ‡∞é‡∞≤‡∞æ ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞ø?' }
            ],
            'en': [
                { icon: 'fa-leaf', text: 'How to control Bacterial Leaf Blight?', question: 'How to control Bacterial Leaf Blight in rice?' },
                { icon: 'fa-flask', text: 'How to apply fertilizers?', question: 'How to apply fertilizers for rice?' },
                { icon: 'fa-calendar', text: 'When to harvest rice?', question: 'When is the right time to harvest rice?' },
                { icon: 'fa-cloud-sun', text: 'How is the weather today?', question: 'How is the weather today for farming?' },
                { icon: 'fa-bug', text: 'How to control pests?', question: 'How to control pests in rice?' },
                { icon: 'fa-tint', text: 'How to manage water?', question: 'How to manage water in rice fields?' }
            ],
            'hi': [
                { icon: 'fa-leaf', text: '‡§¨‡•à‡§ï‡•ç‡§ü‡•Ä‡§∞‡§ø‡§Ø‡§≤ ‡§≤‡•Ä‡§´ ‡§¨‡•ç‡§≤‡§æ‡§á‡§ü ‡§ï‡•à‡§∏‡•á ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç?', question: '‡§ß‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§¨‡•à‡§ï‡•ç‡§ü‡•Ä‡§∞‡§ø‡§Ø‡§≤ ‡§≤‡•Ä‡§´ ‡§¨‡•ç‡§≤‡§æ‡§á‡§ü ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç?' },
                { icon: 'fa-flask', text: '‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§ï‡•à‡§∏‡•á ‡§°‡§æ‡§≤‡•á‡§Ç?', question: '‡§ß‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§ï‡•à‡§∏‡•á ‡§°‡§æ‡§≤‡•á‡§Ç?' },
                { icon: 'fa-calendar', text: '‡§ß‡§æ‡§® ‡§ï‡•Ä ‡§ï‡§ü‡§æ‡§à ‡§ï‡§¨ ‡§ï‡§∞‡•á‡§Ç?', question: '‡§ß‡§æ‡§® ‡§ï‡•Ä ‡§ï‡§ü‡§æ‡§à ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§∏‡§Æ‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?' },
                { icon: 'fa-cloud-sun', text: '‡§Ü‡§ú ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•à‡§∏‡§æ ‡§π‡•à?', question: '‡§Ü‡§ú ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•à‡§∏‡§æ ‡§π‡•à?' },
                { icon: 'fa-bug', text: '‡§ï‡•Ä‡§ü‡•ã‡§Ç ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç?', question: '‡§ß‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•Ä‡§ü‡•ã‡§Ç ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç?' },
                { icon: 'fa-tint', text: '‡§™‡§æ‡§®‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç?', question: '‡§ß‡§æ‡§® ‡§ï‡•á ‡§ñ‡•á‡§§ ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§®‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç?' }
            ]
        };

        // Extensive farming knowledge base in multiple languages
        const farmingKnowledge = {
            'te': {
                // Disease related
                'disease': '‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡∞ø ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞£ ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞®‡∞ø‡∞∞‡±ã‡∞ß‡∞ï ‡∞∞‡∞ï‡∞æ‡∞≤‡±Å ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø, ‡∞∏‡∞ï‡∞æ‡∞≤‡∞Ç‡∞≤‡±ã ‡∞Æ‡∞Ç‡∞¶‡±Å‡∞≤‡±Å ‡∞™‡∞ø‡∞ö‡∞ø‡∞ï‡∞æ‡∞∞‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø, ‡∞™‡∞Ç‡∞ü ‡∞Æ‡∞æ‡∞∞‡±ç‡∞™‡∞ø‡∞°‡∞ø ‡∞™‡∞æ‡∞ü‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.',
                'bacterial': '‡∞¨‡∞æ‡∞ï‡±ç‡∞ü‡±Ä‡∞∞‡∞ø‡∞Ø‡∞≤‡±ç ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡±Å‡∞≤‡∞ï‡±Å ‡∞ï‡∞æ‡∞™‡∞∞‡±ç ‡∞Ü‡∞ï‡±ç‡∞∏‡±Ä‡∞ï‡±ç‡∞≤‡±ã‡∞∞‡±à‡∞°‡±ç 0.3% ‡∞™‡∞ø‡∞ö‡∞ø‡∞ï‡∞æ‡∞∞‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø. ‡∞®‡∞§‡±ç‡∞∞‡∞ú‡∞®‡∞ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å ‡∞Ö‡∞ß‡∞ø‡∞ï‡∞Ç‡∞ó‡∞æ ‡∞µ‡±á‡∞Ø‡∞µ‡∞¶‡±ç‡∞¶‡±Å.',
                'fungal': '‡∞∂‡∞ø‡∞≤‡±Ä‡∞Ç‡∞ß‡±ç‡∞∞ ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡±Å‡∞≤‡∞ï‡±Å ‡∞Æ‡±ç‡∞Ø‡∞æ‡∞Ç‡∞ï‡±ã‡∞ú‡±Ü‡∞¨‡±ç 2.5 ‡∞ó‡±ç‡∞∞‡∞æ/‡∞≤‡±Ä ‡∞™‡∞ø‡∞ö‡∞ø‡∞ï‡∞æ‡∞∞‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø. ‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞® ‡∞∂‡±Å‡∞¶‡±ç‡∞ß‡∞ø ‡∞§‡∞™‡±ç‡∞™‡∞®‡∞ø‡∞∏‡∞∞‡∞ø.',
                
                // Fertilizer related
                'fertilizer': '‡∞µ‡∞∞‡∞ø‡∞ï‡∞ø ‡∞π‡±Ü‡∞ï‡±ç‡∞ü‡∞æ‡∞∞‡±Å‡∞ï‡±Å ‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ 210 ‡∞ï‡∞ø‡∞≤‡±ã‡∞≤‡±Å, ‡∞∏‡±Ç‡∞™‡∞∞‡±ç ‡∞´‡∞æ‡∞∏‡±ç‡∞´‡±á‡∞ü‡±ç 315 ‡∞ï‡∞ø‡∞≤‡±ã‡∞≤‡±Å, ‡∞™‡±ä‡∞ü‡∞æ‡∞∑‡±ç 85 ‡∞ï‡∞ø‡∞≤‡±ã‡∞≤‡±Å ‡∞µ‡±á‡∞Ø‡∞æ‡∞≤‡∞ø. ‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ ‡∞Æ‡±Ç‡∞°‡±Å ‡∞µ‡∞ø‡∞°‡∞§‡∞≤‡±ç‡∞≤‡±ã ‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.',
                'urea': '‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ ‡∞Æ‡±Ç‡∞°‡±Å ‡∞µ‡∞ø‡∞°‡∞§‡∞≤‡±ç‡∞≤‡±ã ‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø: ‡∞®‡∞æ‡∞ü‡±ç‡∞≤‡±Å ‡∞µ‡±á‡∞∏‡∞ø‡∞® 15, 35, 50 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡∞ï‡±Å. ‡∞í‡∞ï‡±ç‡∞ï‡±ã‡∞∏‡∞æ‡∞∞‡∞ø 70 ‡∞ï‡∞ø‡∞≤‡±ã‡∞≤‡±Å ‡∞ö‡±ä‡∞™‡±ç‡∞™‡±Å‡∞®.',
                'organic': '‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡∞ø‡∞Ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡∞ï‡±Å ‡∞™‡∞∂‡±Å‡∞µ‡±Å‡∞≤ ‡∞é‡∞∞‡±Å‡∞µ‡±Å 10-12 ‡∞ü‡∞®‡±ç‡∞®‡±Å‡∞≤‡±Å, ‡∞µ‡∞∞‡±ç‡∞Æ‡±Ä‡∞ï‡∞Ç‡∞™‡±ã‡∞∏‡±ç‡∞ü‡±ç 5 ‡∞ü‡∞®‡±ç‡∞®‡±Å‡∞≤‡±Å ‡∞π‡±Ü‡∞ï‡±ç‡∞ü‡∞æ‡∞∞‡±Å‡∞ï‡±Å ‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.',
                
                // Harvest related
                'harvest': '‡∞µ‡∞∞‡∞ø ‡∞ï‡±ã‡∞§‡∞ï‡±Å 80-85% ‡∞ó‡∞ø‡∞Ç‡∞ú‡∞≤‡±Å ‡∞™‡∞∏‡±Å‡∞™‡±Å ‡∞∞‡∞Ç‡∞ó‡±Å‡∞≤‡±ã‡∞ï‡∞ø ‡∞Æ‡∞æ‡∞∞‡∞æ‡∞≤‡∞ø. ‡∞™‡±Ç‡∞§ ‡∞µ‡∞ö‡±ç‡∞ö‡∞ø‡∞® 30-35 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡∞ï‡±Å ‡∞ï‡±ã‡∞§‡∞ï‡±Å ‡∞∏‡∞ø‡∞¶‡±ç‡∞ß‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞ü‡±Å‡∞Ç‡∞¶‡∞ø.',
                'when to harvest': '‡∞ó‡∞ø‡∞Ç‡∞ú‡∞≤ ‡∞§‡±á‡∞Æ ‡∞∂‡∞æ‡∞§‡∞Ç 20-25% ‡∞â‡∞®‡±ç‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞ï‡±ã‡∞§‡∞ï‡±Å ‡∞∏‡∞∞‡±à‡∞® ‡∞∏‡∞Æ‡∞Ø‡∞Ç. ‡∞ï‡±ã‡∞§ ‡∞Ü‡∞≤‡∞∏‡±ç‡∞Ø‡∞Ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±á ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø ‡∞§‡∞ó‡±ç‡∞ó‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø.',
                
                // Weather related
                'weather': '‡∞µ‡∞∞‡∞ø‡∞ï‡∞ø 25-35¬∞C ‡∞â‡∞∑‡±ç‡∞£‡±ã‡∞ó‡±ç‡∞∞‡∞§ ‡∞Ö‡∞®‡±Å‡∞ï‡±Ç‡∞≤‡∞Ç. ‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞µ‡∞∞‡±ç‡∞∑‡∞æ‡∞≤‡±Å ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡±Å‡∞≤‡∞ï‡±Å ‡∞ï‡∞æ‡∞∞‡∞£‡∞Æ‡∞µ‡±Å‡∞§‡∞æ‡∞Ø‡∞ø. ‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞µ‡∞∞‡±ç‡∞∑‡∞æ‡∞≤‡±Å ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø ‡∞§‡∞ó‡±ç‡∞ó‡∞ø‡∞∏‡±ç‡∞§‡∞æ‡∞Ø‡∞ø.',
                'rain': '‡∞µ‡∞∞‡∞ø‡∞ï‡∞ø ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞æ‡∞®‡∞ø‡∞ï‡∞ø 1000-1500 ‡∞Æ‡∞ø.‡∞Æ‡±Ä ‡∞µ‡∞∞‡±ç‡∞∑‡∞™‡∞æ‡∞§‡∞Ç ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç. ‡∞µ‡∞∞‡±ç‡∞∑‡∞æ‡∞ï‡∞æ‡∞≤‡∞Ç‡∞≤‡±ã ‡∞®‡±Ä‡∞ü‡∞ø ‡∞é‡∞¶‡±ç‡∞¶‡∞°‡∞ø ‡∞∞‡∞æ‡∞ï‡±Å‡∞Ç‡∞°‡∞æ ‡∞ö‡±Ç‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞æ‡∞≤‡∞ø.',
                
                // Pest related
                'pest': '‡∞ö‡±Ä‡∞°‡∞™‡±Ä‡∞°‡∞≤ ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞£‡∞ï‡±Å ‡∞∏‡∞Æ‡±Ä‡∞ï‡±É‡∞§ ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡±Å‡∞≤‡±Å ‡∞™‡∞æ‡∞ü‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø. ‡∞®‡∞ø‡∞∞‡±ã‡∞ß‡∞ï ‡∞∞‡∞ï‡∞æ‡∞≤‡±Å, ‡∞∏‡∞Æ‡∞§‡±Å‡∞≤‡±ç‡∞Ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å, ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Æ‡±à‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞Æ‡∞æ‡∞§‡±ç‡∞∞‡∞Æ‡±á ‡∞Æ‡∞Ç‡∞¶‡±Å‡∞≤‡±Å ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø.',
                'insect': '‡∞§‡±ä‡∞°‡∞ø‡∞Æ‡±Å ‡∞ï‡±Å‡∞≥‡±ç‡∞≥‡±Å, ‡∞ö‡∞ø‡∞Æ‡±ç‡∞Æ‡∞ü, ‡∞§‡±Ü‡∞≤‡±ç‡∞≤‡∞¶‡±ã‡∞Æ ‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞® ‡∞§‡±Ü‡∞ó‡±Å‡∞≥‡±ç‡∞≥‡±Å. ‡∞µ‡±Ä‡∞ü‡∞ø ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞£‡∞ï‡±Å ‡∞∏‡∞∞‡±à‡∞® ‡∞∏‡∞Æ‡∞Ø‡∞Ç‡∞≤‡±ã ‡∞Æ‡∞Ç‡∞¶‡±Å‡∞≤‡±Å ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø.',
                
                // Water related
                'water': '‡∞µ‡∞∞‡∞ø‡∞ï‡∞ø ‡∞®‡±Ä‡∞ü‡∞ø ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£ ‡∞ö‡∞æ‡∞≤‡∞æ ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø‡∞Ç. ‡∞®‡∞æ‡∞ü‡±ç‡∞≤‡±Å ‡∞µ‡±á‡∞∏‡∞ø‡∞® ‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§ 5-7 ‡∞∏‡±Ü‡∞Ç.‡∞Æ‡±Ä ‡∞®‡±Ä‡∞∞‡±Å ‡∞®‡∞ø‡∞≤‡∞µ ‡∞â‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ø. ‡∞ï‡±ã‡∞§‡∞ï‡±Å 15 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤ ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å ‡∞®‡±Ä‡∞∞‡±Å ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ø.',
                
                // Soil related
                'soil': '‡∞µ‡∞∞‡∞ø‡∞ï‡∞ø ‡∞í‡∞Ç‡∞°‡±ç‡∞∞‡±Å ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø, ‡∞¨‡∞Ç‡∞ï‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞Æ‡∞Ç‡∞ö‡∞ø‡∞µ‡∞ø. ‡∞®‡±á‡∞≤ pH 5.5-6.5 ‡∞â‡∞Ç‡∞°‡∞æ‡∞≤‡∞ø. ‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡∞ø‡∞Ø ‡∞™‡∞¶‡∞æ‡∞∞‡±ç‡∞•‡∞Ç ‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ‡∞ó‡∞æ ‡∞â‡∞Ç‡∞°‡±á ‡∞®‡±á‡∞≤‡∞≤‡±Å ‡∞Æ‡∞Ç‡∞ö‡∞ø‡∞µ‡∞ø.',
                
                // Seed related
                'seed': '‡∞∂‡±Å‡∞¶‡±ç‡∞ß‡∞ø ‡∞ö‡±á‡∞∏‡∞ø‡∞®, ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞£‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø‡∞® ‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤‡±Å ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø. ‡∞π‡±Ü‡∞ï‡±ç‡∞ü‡∞æ‡∞∞‡±Å‡∞ï‡±Å 40-50 ‡∞ï‡∞ø‡∞≤‡±ã‡∞≤ ‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤‡±Å ‡∞∏‡∞∞‡∞ø‡∞™‡±ã‡∞§‡∞æ‡∞Ø‡∞ø.',
                
                // Price related
                'price': '‡∞ß‡∞∞‡∞≤ ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞ø‡∞ï ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç ‡∞Ø‡∞æ‡∞∞‡±ç‡∞°‡±ç, ‡∞∞‡±à‡∞§‡±Å ‡∞¨‡∞ú‡∞æ‡∞∞‡±ç‡∞≤‡∞®‡±Å ‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø. ‡∞™‡±ç‡∞∞‡∞≠‡±Å‡∞§‡±ç‡∞µ MSP ‡∞ß‡∞∞‡∞≤‡±Å ‡∞§‡±Ü‡∞≤‡±Å‡∞∏‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø.'
            },
            'en': {
                'disease': 'For disease control, use resistant varieties, timely spraying of pesticides, and practice crop rotation.',
                'bacterial': 'For bacterial diseases, spray Copper Oxychloride 0.3%. Avoid excess nitrogen fertilizers.',
                'fungal': 'For fungal diseases, spray Mancozeb 2.5 g/litre. Seed treatment is mandatory.',
                
                'fertilizer': 'For rice, apply Urea 210 kg, Super Phosphate 315 kg, Potash 85 kg per hectare. Apply Urea in three splits.',
                'urea': 'Apply Urea in three splits: 15, 35, and 50 days after transplanting. 70 kg each time.',
                'organic': 'For organic farming, apply Farm Yard Manure 10-12 tons, Vermicompost 5 tons per hectare.',
                
                'harvest': 'Harvest when 80-85% grains turn yellow. Ready 30-35 days after flowering.',
                'when to harvest': 'Right time to harvest when moisture content is 20-25%. Delay reduces yield.',
                
                'weather': 'Rice requires 25-35¬∞C temperature. Excess rain causes diseases, low rain reduces yield.',
                'rain': 'Rice needs 1000-1500 mm annual rainfall. Ensure no water stress during rainy season.',
                
                'pest': 'Use integrated pest management: resistant varieties, balanced fertilizers, need-based pesticides.',
                'insect': 'Major pests: Stem borer, Leaf folder, Brown plant hopper. Apply pesticides at right time.',
                
                'water': 'Maintain 5-7 cm water after transplanting. Remove water 15 days before harvest.',
                'soil': 'Rice grows well in loamy and clay soils. Soil pH should be 5.5-6.5.',
                'seed': 'Use certified seeds. 40-50 kg seeds per hectare is sufficient.',
                'price': 'For price information, contact local market yard or Rythu Bazaars. Check government MSP rates.'
            },
            'hi': {
                'disease': '‡§∞‡•ã‡§ó ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡§§‡§ø‡§∞‡•ã‡§ß‡•Ä ‡§ï‡§ø‡§∏‡•ç‡§Æ‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç, ‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ ‡§ï‡§∞‡•á‡§Ç, ‡§î‡§∞ ‡§´‡§∏‡§≤ ‡§ö‡§ï‡•ç‡§∞ ‡§Ö‡§™‡§®‡§æ‡§è‡§Ç‡•§',
                'bacterial': '‡§ú‡•Ä‡§µ‡§æ‡§£‡•Å ‡§∞‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•â‡§™‡§∞ ‡§ë‡§ï‡•ç‡§∏‡•Ä‡§ï‡•ç‡§≤‡•ã‡§∞‡§æ‡§á‡§° 0.3% ‡§ï‡§æ ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Ö‡§ß‡§ø‡§ï ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§',
                'fungal': '‡§´‡§´‡•Ç‡§Ç‡§¶ ‡§∞‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•à‡§®‡•ç‡§ï‡•ã‡§ú‡•á‡§¨ 2.5 ‡§ó‡•ç‡§∞‡§æ‡§Æ/‡§≤‡•Ä‡§ü‡§∞ ‡§ï‡§æ ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§¨‡•Ä‡§ú ‡§â‡§™‡§ö‡§æ‡§∞ ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§π‡•à‡•§',
                
                'fertilizer': '‡§ß‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡§§‡§ø ‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ ‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ 210 ‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ, ‡§∏‡•Å‡§™‡§∞ ‡§´‡•â‡§∏‡•ç‡§´‡•á‡§ü 315 ‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ, ‡§™‡•ã‡§ü‡§æ‡§∂ 85 ‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ ‡§°‡§æ‡§≤‡•á‡§Ç‡•§ ‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ ‡§§‡•Ä‡§® ‡§¨‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§°‡§æ‡§≤‡•á‡§Ç‡•§',
                'urea': '‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ ‡§§‡•Ä‡§® ‡§¨‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§°‡§æ‡§≤‡•á‡§Ç: ‡§∞‡•ã‡§™‡§æ‡§à ‡§ï‡•á 15, 35 ‡§î‡§∞ 50 ‡§¶‡§ø‡§® ‡§¨‡§æ‡§¶‡•§ ‡§π‡§∞ ‡§¨‡§æ‡§∞ 70 ‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ‡•§',
                'organic': '‡§ú‡•à‡§µ‡§ø‡§ï ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ó‡•ã‡§¨‡§∞ ‡§ï‡•Ä ‡§ñ‡§æ‡§¶ 10-12 ‡§ü‡§®, ‡§µ‡§∞‡•ç‡§Æ‡•Ä‡§ï‡§Æ‡•ç‡§™‡•ã‡§∏‡•ç‡§ü 5 ‡§ü‡§® ‡§™‡•ç‡§∞‡§§‡§ø ‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç‡•§',
                
                'harvest': '‡§ï‡§ü‡§æ‡§à ‡§§‡§¨ ‡§ï‡§∞‡•á‡§Ç ‡§ú‡§¨ 80-85% ‡§¶‡§æ‡§®‡•á ‡§™‡•Ä‡§≤‡•á ‡§π‡•ã ‡§ú‡§æ‡§è‡§Ç‡•§ ‡§´‡•Ç‡§≤ ‡§Ü‡§®‡•á ‡§ï‡•á 30-35 ‡§¶‡§ø‡§® ‡§¨‡§æ‡§¶ ‡§§‡•à‡§Ø‡§æ‡§∞‡•§',
                'when to harvest': '‡§∏‡§π‡•Ä ‡§∏‡§Æ‡§Ø ‡§ú‡§¨ ‡§®‡§Æ‡•Ä 20-25% ‡§π‡•ã‡•§ ‡§¶‡•á‡§∞‡•Ä ‡§∏‡•á ‡§â‡§™‡§ú ‡§ï‡§Æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§',
                
                'weather': '‡§ß‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è 25-35¬∞C ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§Ö‡§ß‡§ø‡§ï ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§∏‡•á ‡§∞‡•ã‡§ó, ‡§ï‡§Æ ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§∏‡•á ‡§â‡§™‡§ú ‡§ï‡§Æ‡•§',
                'rain': '‡§ß‡§æ‡§® ‡§ï‡•ã 1000-1500 ‡§Æ‡§ø‡§Æ‡•Ä ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§µ‡§∞‡•ç‡§∑‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§¨‡§∞‡§∏‡§æ‡§§ ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä ‡§® ‡§π‡•ã‡§®‡•á ‡§¶‡•á‡§Ç‡•§',
                
                'pest': '‡§è‡§ï‡•Ä‡§ï‡•É‡§§ ‡§ï‡•Ä‡§ü ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§Ö‡§™‡§®‡§æ‡§è‡§Ç: ‡§™‡•ç‡§∞‡§§‡§ø‡§∞‡•ã‡§ß‡•Ä ‡§ï‡§ø‡§∏‡•ç‡§Æ‡•á‡§Ç, ‡§∏‡§Ç‡§§‡•Å‡§≤‡§ø‡§§ ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï, ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ‡§®‡•Å‡§∏‡§æ‡§∞ ‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï‡•§',
                'insect': '‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡•Ä‡§ü: ‡§§‡§®‡§æ ‡§õ‡•á‡§¶‡§ï, ‡§™‡§§‡•ç‡§§‡•Ä ‡§≤‡§™‡•á‡§ü‡§ï, ‡§≠‡•Ç‡§∞‡§æ ‡§´‡•Å‡§¶‡§ï‡§æ‡•§ ‡§∏‡§π‡•Ä ‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï ‡§°‡§æ‡§≤‡•á‡§Ç‡•§',
                
                'water': '‡§∞‡•ã‡§™‡§æ‡§à ‡§ï‡•á ‡§¨‡§æ‡§¶ 5-7 ‡§∏‡•á‡§Æ‡•Ä ‡§™‡§æ‡§®‡•Ä ‡§∞‡§ñ‡•á‡§Ç‡•§ ‡§ï‡§ü‡§æ‡§à ‡§∏‡•á 15 ‡§¶‡§ø‡§® ‡§™‡§π‡§≤‡•á ‡§™‡§æ‡§®‡•Ä ‡§®‡§ø‡§ï‡§æ‡§≤ ‡§¶‡•á‡§Ç‡•§',
                'soil': '‡§ß‡§æ‡§® ‡§¶‡•ã‡§Æ‡§ü ‡§î‡§∞ ‡§ö‡§ø‡§ï‡§®‡•Ä ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§Æ‡•á‡§Ç ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ pH 5.5-6.5 ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§',
                'seed': '‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§ ‡§¨‡•Ä‡§ú‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§ 40-50 ‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ ‡§¨‡•Ä‡§ú ‡§™‡•ç‡§∞‡§§‡§ø ‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ ‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§π‡•à‡•§',
                'price': '‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§Æ‡§Ç‡§°‡•Ä ‡§Ø‡§æ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä MSP ‡§¶‡§∞‡•á‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§'
            }
        };

        // UI Text in different languages
        const uiText = {
            'te': {
                headerTitle: '‡∞∞‡±à‡∞§‡±Å ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡±Å',
                headerSubtitle: 'AI ‡∞µ‡∞æ‡∞Ø‡∞ø‡∞∏‡±ç ‡∞Ö‡∞∏‡∞ø‡∞∏‡±ç‡∞ü‡±Ü‡∞Ç‡∞ü‡±ç - ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø',
                languageLabel: '‡∞Æ‡±Ä ‡∞≠‡∞æ‡∞∑‡∞®‡±Å ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø',
                voiceHint: '‡∞Æ‡±à‡∞ï‡±ç ‡∞™‡±à ‡∞ï‡±ç‡∞≤‡∞ø‡∞ï‡±ç ‡∞ö‡±á‡∞∏‡∞ø ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø',
                quickQuestionsTitle: '‡∞§‡∞∞‡∞ö‡±Å‡∞ó‡∞æ ‡∞Ö‡∞°‡∞ø‡∞ó‡±á ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞≤‡±Å:',
                statusText: 'AI ‡∞Ö‡∞∏‡∞ø‡∞∏‡±ç‡∞ü‡±Ü‡∞Ç‡∞ü‡±ç ‡∞∏‡∞ø‡∞¶‡±ç‡∞ß‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø',
                stopAudioText: '‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã ‡∞Ü‡∞™‡∞Ç‡∞°‡∞ø',
                footerText: '‡∞∞‡±à‡∞§‡±Å‡∞≤ ‡∞ï‡±ã‡∞∏‡∞Ç ‚ù§Ô∏è | AI ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡±Å - ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø',
                listening: '‡∞µ‡∞ø‡∞Ç‡∞ü‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞®‡±Å... ‡∞Æ‡±Ä ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø',
                welcome: '‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç! ‡∞®‡±á‡∞®‡±Å AI ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡∞ø‡∞®‡∞ø. ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞Ç‡∞¨‡∞Ç‡∞ß‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø.'
            },
            'en': {
                headerTitle: 'Farmer Assistant',
                headerSubtitle: 'AI Voice Assistant - Ask Any Question',
                languageLabel: 'Select Your Language',
                voiceHint: 'Click the mic and ask any question',
                quickQuestionsTitle: 'Frequently Asked Questions:',
                statusText: 'AI Assistant Ready',
                stopAudioText: 'Stop Audio',
                footerText: 'Made with ‚ù§Ô∏è for Farmers | AI Assistant - Ask Anything',
                listening: 'Listening... Ask your question',
                welcome: 'Hello! I am an AI farming assistant. Ask me anything about agriculture: diseases, fertilizers, harvest time, pests, weather, and more.'
            },
            'hi': {
                headerTitle: '‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§π‡§æ‡§Ø‡§ï',
                headerSubtitle: 'AI ‡§µ‡•â‡§á‡§∏ ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü - ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç',
                languageLabel: '‡§Ö‡§™‡§®‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç',
                voiceHint: '‡§Æ‡§æ‡§á‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç',
                quickQuestionsTitle: '‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§™‡•Ç‡§õ‡•á ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§®:',
                statusText: 'AI ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à',
                stopAudioText: '‡§ë‡§°‡§ø‡§Ø‡•ã ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç',
                footerText: '‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‚ù§Ô∏è ‡§∏‡•á | AI ‡§∏‡§π‡§æ‡§Ø‡§ï - ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§™‡•Ç‡§õ‡•á‡§Ç',
                listening: '‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç... ‡§Ö‡§™‡§®‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç',
                welcome: '‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç AI ‡§ï‡•É‡§∑‡§ø ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Ç‡•§ ‡§ï‡•É‡§∑‡§ø ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§™‡•Ç‡§õ‡•á‡§Ç: ‡§∞‡•ã‡§ó, ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï, ‡§ï‡§ü‡§æ‡§à ‡§∏‡§Æ‡§Ø, ‡§ï‡•Ä‡§ü, ‡§Æ‡•å‡§∏‡§Æ ‡§î‡§∞ ‡§Ö‡§ß‡§ø‡§ï‡•§'
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadVoices();
            setLanguage('te', document.querySelector('.lang-option.active'));
        });

        // Load available voices
        function loadVoices() {
            if ('speechSynthesis' in window) {
                voices = speechSynthesis.getVoices();
                if (voices.length === 0) {
                    speechSynthesis.onvoiceschanged = function() {
                        voices = speechSynthesis.getVoices();
                    };
                }
            }
        }

        // Set Language
        function setLanguage(lang, element) {
            currentLanguage = lang;
            
            document.querySelectorAll('.lang-option').forEach(btn => {
                btn.classList.remove('active');
            });
            element.classList.add('active');
            
            // Update all UI text
            updateUIText(lang);
            
            // Update FAQ chips
            updateFAQChips(lang);
            
            // Update welcome message
            document.getElementById('welcomeMessage').textContent = uiText[lang].welcome;
            
            // Speak welcome message
            setTimeout(() => {
                speakText(uiText[lang].welcome, lang);
            }, 500);
        }

        function updateUIText(lang) {
            document.getElementById('headerTitle').textContent = uiText[lang].headerTitle;
            document.getElementById('headerSubtitle').textContent = uiText[lang].headerSubtitle;
            document.getElementById('languageLabel').textContent = uiText[lang].languageLabel;
            document.getElementById('voiceHint').textContent = uiText[lang].voiceHint;
            document.getElementById('quickQuestionsTitle').textContent = uiText[lang].quickQuestionsTitle;
            document.getElementById('statusText').textContent = uiText[lang].statusText;
            document.getElementById('stopAudioText').textContent = uiText[lang].stopAudioText;
            document.getElementById('footerText').innerHTML = uiText[lang].footerText;
        }

        function updateFAQChips(lang) {
            const chipsContainer = document.getElementById('questionChips');
            chipsContainer.innerHTML = ''; // Clear existing chips
            
            const questions = faqQuestions[lang];
            
            questions.forEach(q => {
                const chip = document.createElement('button');
                chip.className = 'chip';
                chip.onclick = function() { askQuestion(q.question); };
                
                const icon = document.createElement('i');
                icon.className = `fas ${q.icon}`;
                
                const text = document.createTextNode(' ' + q.text);
                
                chip.appendChild(icon);
                chip.appendChild(text);
                
                chipsContainer.appendChild(chip);
            });
        }

        // Toggle Listening
        function toggleListening() {
            if (!isListening) {
                startListening();
            } else {
                stopListening();
            }
        }

        // Start Listening
        async function startListening() {
            const voiceBtn = document.getElementById('voiceBtn');
            const waveAnimation = document.getElementById('waveAnimation');
            
            try {
                if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                    showError('speech_not_supported');
                    return;
                }

                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                
                const langMap = {
                    'te': 'te-IN',
                    'en': 'en-IN',
                    'hi': 'hi-IN'
                };
                recognition.lang = langMap[currentLanguage];
                recognition.continuous = false;
                recognition.interimResults = false;

                recognition.start();
                isListening = true;
                
                voiceBtn.classList.add('listening');
                waveAnimation.classList.remove('hidden');
                voiceBtn.innerHTML = '<i class="fas fa-stop"></i>';
                
                addMessage('bot', 'üé§ ' + uiText[currentLanguage].listening);

                recognition.onresult = async function(e) {
                    const question = e.results[0][0].transcript;
                    stopListening();
                    
                    addMessage('user', question);
                    
                    document.getElementById('typingIndicator').classList.remove('hidden');
                    
                    setTimeout(() => {
                        const answer = getAIResponse(question, currentLanguage);
                        document.getElementById('typingIndicator').classList.add('hidden');
                        addMessage('bot', answer);
                        speakText(answer, currentLanguage);
                    }, 1500);
                };

                recognition.onerror = function(e) {
                    console.error('Speech error:', e);
                    stopListening();
                    showError('could_not_hear');
                };

                recognition.onend = function() {
                    stopListening();
                };

            } catch (error) {
                console.error('Error:', error);
                stopListening();
                showError('general_error');
            }
        }

        function showError(type) {
            const errors = {
                'te': {
                    'speech_not_supported': '‡∞∏‡±ç‡∞™‡±Ä‡∞ö‡±ç ‡∞∞‡∞ø‡∞ï‡∞ó‡±ç‡∞®‡∞ø‡∞∑‡∞®‡±ç ‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å ‡∞≤‡±á‡∞¶‡±Å. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø Chrome ‡∞¨‡±ç‡∞∞‡±å‡∞ú‡∞∞‡±ç ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.',
                    'could_not_hear': '‡∞∏‡±ç‡∞™‡∞∑‡±ç‡∞ü‡∞Ç‡∞ó‡∞æ ‡∞µ‡∞ø‡∞®‡∞ø‡∞™‡∞ø‡∞Ç‡∞ö‡∞≤‡±á‡∞¶‡±Å. ‡∞Æ‡∞≥‡±ç‡∞≥‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.',
                    'general_error': '‡∞≤‡±ã‡∞™‡∞Ç. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡∞≥‡±ç‡∞≥‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.'
                },
                'en': {
                    'speech_not_supported': 'Speech recognition not supported. Please use Chrome browser.',
                    'could_not_hear': 'Could not hear clearly. Please try again.',
                    'general_error': 'Error. Please try again.'
                },
                'hi': {
                    'speech_not_supported': '‡§∏‡•ç‡§™‡•Ä‡§ö ‡§∞‡§ø‡§ï‡§ó‡•ç‡§®‡§ø‡§∂‡§® ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ Chrome ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§',
                    'could_not_hear': '‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§∏‡•Å‡§®‡§æ‡§à ‡§¶‡§ø‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§',
                    'general_error': '‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§'
                }
            };
            
            addMessage('bot', '‚ùå ' + errors[currentLanguage][type]);
        }

        // Stop Listening
        function stopListening() {
            if (recognition) {
                try {
                    recognition.stop();
                } catch (e) {}
            }
            
            isListening = false;
            
            const voiceBtn = document.getElementById('voiceBtn');
            const waveAnimation = document.getElementById('waveAnimation');
            
            voiceBtn.classList.remove('listening');
            waveAnimation.classList.add('hidden');
            voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
        }

        // Ask Question from Chip
        async function askQuestion(question) {
            addMessage('user', question);
            
            document.getElementById('typingIndicator').classList.remove('hidden');
            
            setTimeout(() => {
                const answer = getAIResponse(question, currentLanguage);
                document.getElementById('typingIndicator').classList.add('hidden');
                addMessage('bot', answer);
                speakText(answer, currentLanguage);
            }, 1000);
        }

        // Get AI Response for ANY question
        function getAIResponse(question, lang) {
            question = question.toLowerCase();
            const kb = farmingKnowledge[lang];
            
            // Check for keywords and return relevant information
            if (question.includes('‡∞¨‡∞æ‡∞ï‡±ç‡∞ü‡±Ä‡∞∞‡∞ø‡∞Ø‡∞≤‡±ç') || question.includes('bacterial') || question.includes('‡§¨‡•à‡§ï‡•ç‡§ü‡•Ä‡§∞‡§ø‡§Ø‡§≤') || 
                (question.includes('leaf') && question.includes('blight'))) {
                return kb['bacterial'];
            }
            else if (question.includes('fungal') || question.includes('‡∞∂‡∞ø‡∞≤‡±Ä‡∞Ç‡∞ß‡±ç‡∞∞') || question.includes('‡§´‡§´‡•Ç‡§Ç‡§¶')) {
                return kb['fungal'];
            }
            else if (question.includes('‡∞é‡∞∞‡±Å‡∞µ‡±Å') || question.includes('fertilizer') || question.includes('‡§â‡§∞‡•ç‡§µ‡§∞‡§ï')) {
                if (question.includes('‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ') || question.includes('urea')) {
                    return kb['urea'];
                }
                if (question.includes('organic') || question.includes('‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡∞ø‡∞Ø') || question.includes('‡§ú‡•à‡§µ‡§ø‡§ï')) {
                    return kb['organic'];
                }
                return kb['fertilizer'];
            }
            else if (question.includes('‡∞ï‡±ã‡∞§') || question.includes('harvest') || question.includes('‡§ï‡§ü‡§æ‡§à')) {
                return kb['harvest'];
            }
            else if (question.includes('‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç') || question.includes('weather') || question.includes('‡§Æ‡•å‡§∏‡§Æ')) {
                if (question.includes('‡∞µ‡∞∞‡±ç‡∞∑‡∞Ç') || question.includes('rain') || question.includes('‡§¨‡§æ‡§∞‡§ø‡§∂')) {
                    return kb['rain'];
                }
                return kb['weather'];
            }
            else if (question.includes('‡∞ö‡±Ä‡∞°') || question.includes('pest') || question.includes('‡§ï‡•Ä‡§ü')) {
                if (question.includes('insect') || question.includes('‡∞ï‡±Ä‡∞ü‡∞ï') || question.includes('‡§ï‡•Ä‡§ü')) {
                    return kb['insect'];
                }
                return kb['pest'];
            }
            else if (question.includes('‡∞®‡±Ä‡∞∞‡±Å') || question.includes('water') || question.includes('‡§™‡§æ‡§®‡•Ä')) {
                return kb['water'];
            }
            else if (question.includes('‡∞®‡±á‡∞≤') || question.includes('soil') || question.includes('‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä')) {
                return kb['soil'];
            }
            else if (question.includes('‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞Ç') || question.includes('seed') || question.includes('‡§¨‡•Ä‡§ú')) {
                return kb['seed'];
            }
            else if (question.includes('‡∞ß‡∞∞') || question.includes('price') || question.includes('‡§Æ‡•Ç‡§≤‡•ç‡§Ø') || question.includes('rate')) {
                return kb['price'];
            }
            else if (question.includes('‡∞∞‡±ã‡∞ó') || question.includes('disease') || question.includes('‡§µ‡•ç‡§Ø‡§æ‡§ß‡§ø')) {
                return kb['disease'];
            }
            
            // Default response for any other question
            const defaultResponses = {
                'te': 'üåæ ‡∞Æ‡±Ä ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞ï‡±Å ‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡∞Ç: "' + question + '" ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç ‡∞ï‡∞æ‡∞µ‡∞æ‡∞≤‡∞æ? ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ç‡∞§ ‡∞∏‡±ç‡∞™‡∞∑‡±ç‡∞ü‡∞Ç‡∞ó‡∞æ ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø. ‡∞®‡±á‡∞®‡±Å ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡±Å‡∞≤‡±Å, ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å, ‡∞ï‡±ã‡∞§ ‡∞∏‡∞Æ‡∞Ø‡∞Ç, ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç, ‡∞ö‡±Ä‡∞°‡∞™‡±Ä‡∞°‡∞≤‡±Å, ‡∞®‡±Ä‡∞∞‡±Å, ‡∞®‡±á‡∞≤, ‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤‡±Å, ‡∞ß‡∞∞‡∞≤ ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç ‡∞á‡∞µ‡±ç‡∞µ‡∞ó‡∞≤‡∞®‡±Å.',
                
                'en': 'üåæ Regarding your question about "' + question + '": I can help with information about diseases, fertilizers, harvest time, weather, pests, water management, soil, seeds, and market prices. Please be more specific.',
                
                'hi': 'üåæ ‡§Ü‡§™‡§ï‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® "' + question + '" ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç: ‡§Æ‡•à‡§Ç ‡§∞‡•ã‡§ó‡•ã‡§Ç, ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï‡•ã‡§Ç, ‡§ï‡§ü‡§æ‡§à ‡§∏‡§Æ‡§Ø, ‡§Æ‡•å‡§∏‡§Æ, ‡§ï‡•Ä‡§ü, ‡§™‡§æ‡§®‡•Ä ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®, ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä, ‡§¨‡•Ä‡§ú ‡§î‡§∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•á ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§î‡§∞ ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§'
            };
            
            return defaultResponses[lang];
        }

        // Text to Speech
        function speakText(text, lang) {
            stopAllAudio();
            
            if (!('speechSynthesis' in window)) {
                console.log('Text-to-speech not supported');
                return;
            }
            
            const utterance = new SpeechSynthesisUtterance(text);
            
            const langMap = {
                'te': 'te-IN',
                'en': 'en-US',
                'hi': 'hi-IN'
            };
            utterance.lang = langMap[lang];
            
            const availableVoices = speechSynthesis.getVoices();
            
            const matchingVoice = availableVoices.find(voice => 
                voice.lang.includes(langMap[lang].split('-')[0])
            );
            
            if (matchingVoice) {
                utterance.voice = matchingVoice;
            }
            
            // For Telugu, if no Telugu voice found, try to find any Indian voice
            if (lang === 'te' && !matchingVoice) {
                const indianVoice = availableVoices.find(voice => 
                    voice.lang.includes('hi') || voice.lang.includes('en-IN')
                );
                if (indianVoice) {
                    utterance.voice = indianVoice;
                }
            }
            
            utterance.rate = 0.9;
            utterance.pitch = 1;
            utterance.volume = 1;
            
            currentUtterance = utterance;
            
            utterance.onerror = function(event) {
                console.error('Speech error:', event.error);
                if (lang === 'te' && event.error === 'language-not-supported') {
                    const fallbackUtterance = new SpeechSynthesisUtterance(text);
                    fallbackUtterance.lang = 'en-US';
                    speechSynthesis.speak(fallbackUtterance);
                }
            };
            
            speechSynthesis.speak(utterance);
        }

        // Stop all audio
        function stopAllAudio() {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
            currentUtterance = null;
        }

        // Add Message to Chat
        function addMessage(sender, text) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'message-bubble';
            bubbleDiv.textContent = text;
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = getCurrentTime();
            
            messageDiv.appendChild(bubbleDiv);
            messageDiv.appendChild(timeDiv);
            chatContainer.appendChild(messageDiv);
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Get Current Time
        function getCurrentTime() {
            const now = new Date();
            let hours = now.getHours();
            let minutes = now.getMinutes();
            const ampm = hours >= 12 ? 'PM' : 'AM';
            
            hours = hours % 12;
            hours = hours ? hours : 12;
            minutes = minutes < 10 ? '0' + minutes : minutes;
            
            return `${hours}:${minutes} ${ampm}`;
        }

        // Clean up on page unload
        window.addEventListener('beforeunload', function() {
            stopAllAudio();
        });
    </script>
</body>
</html>
